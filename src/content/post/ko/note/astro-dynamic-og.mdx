---
title: '(Astro) Satorië¡œ ë™ì  OG ì´ë¯¸ì§€ ìƒì„±í•˜ê¸°'
description: 'Astro í”„ë¡œì íŠ¸ì—ì„œ Satoriì™€ Sharpë¥¼ í™œìš©í•˜ì—¬ ê° í˜ì´ì§€ë§ˆë‹¤ ë™ì ìœ¼ë¡œ OG ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë´…ë‹ˆë‹¤.'
date: 2025-08-29 17:44:15
draft: false
tags:
  - Astro
  - Satori
  - 'OG Image'
  - SEO
---

<img src="/og/ko/note/astro-dynamic-og.png" alt="OG" />

ê¸°ì¡´ì—ëŠ” OG ì´ë¯¸ì§€ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì œì‘í•˜ê±°ë‚˜ í…œí”Œë¦¿ ê¸°ë°˜ ë„êµ¬ë¥¼ ì‚¬ìš©í–ˆì§€ë§Œ, Satorië¥¼ í™œìš©í•˜ë©´ React ì»´í¬ë„ŒíŠ¸ë¡œ ì´ë¯¸ì§€ë¥¼ ë” ì‰½ê²Œ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì•„ë˜ ë‹¨ê³„ì— ë”°ë¼ êµ¬í˜„í•˜ë©´ ë©ë‹ˆë‹¤.

1. **Satori**ë¥¼ ì‚¬ìš©í•˜ì—¬ React ì»´í¬ë„ŒíŠ¸ë¡œ SVG ìƒì„±
2. **Sharp**ë¡œ SVGë¥¼ PNG ì´ë¯¸ì§€ë¡œ ë³€í™˜
3. Astroì˜ **ë™ì  ë¼ìš°íŠ¸**ë¡œ ê° í¬ìŠ¤íŠ¸ë§ˆë‹¤ ê³ ìœ í•œ OG ì´ë¯¸ì§€ ì œê³µ

ğŸš¨
SVGë¥¼ ìƒì„±í•˜ê³  PNGë¡œ ë³€í™˜í•˜ëŠ” ì‘ì—…ì˜ ë¹„ìš©ì´ ë§¤ìš° í¬ê¸° ë•Œë¬¸ì—, ì´ ì‘ì—…ì€ **ë¹Œë“œ ì‹œì (SSG)ì—ì„œ ìˆ˜í–‰**ë˜ê³  í´ë¼ìš°ë“œ ëŸ°íƒ€ì„(SSR) í™˜ê²½ì—ì„œëŠ” ìˆ˜í–‰ë˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•´ì£¼ì„¸ìš”.

## 1. Satorië¡œ SVG ìƒì„±í•˜ê¸°

[Satori](https://github.com/vercel/satori)ëŠ” Vercelì—ì„œ ê´€ë¦¬í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, HTMLê³¼ CSSë¥¼ SVGë¡œ ë³€í™˜í•´ì£¼ëŠ” ë„êµ¬ì…ë‹ˆë‹¤. JSX ë¬¸ë²•ë„ ì§€ì›í•˜ê¸°ì— React ì»´í¬ë„ŒíŠ¸ë¡œ SVG ë°ì´í„°ë¥¼ ì‰½ê²Œ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```bash
bun add -D satori
```

```tsx title="og-image.tsx" {15}
import satori, { type SatoriOptions } from 'satori';

const satoriOption: SatoriOptions = {
  width: 1200,
  height: 630,
};

export async function generateOgImage({
  title,
  desc,
}: {
  title: string;
  desc?: string;
}) {
  const svg = await satori(
    <div
      style={{
        boxSizing: 'border-box',
        display: 'flex',
        flexDirection: 'column',
        justifyContent: 'center',
        gap: '16px',
        height: '100%',
        width: '100%',
        padding: '80px',
        color: '#000',
        backgroundColor: '#fff',
      }}
    >
      <div style={{ fontSize: '64px', fontWeight: 700 }}>{title}</div>
      {desc && (
        <div style={{ marginTop: '20px', fontSize: '32px', color: '#464646' }}>
          {desc}
        </div>
      )}
    </div>,
    satoriOption,
  );
}
```

## 2. Sharpë¡œ SVGë¥¼ PNGë¡œ ë³€í™˜í•˜ê¸°

[Sharp](https://github.com/lovell/sharp)ëŠ” `Node.js` í™˜ê²½ì—ì„œ ì´ë¯¸ì§€ë¥¼ ì••ì¶•ì‹œí‚¤ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.
ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œëŠ” ë™ì‘í•˜ì§€ ì•Šìœ¼ë‹ˆ ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤.

```bash
bun add -D sharp
```

ì´ì „ì— ìƒì„±í•œ svg ë¬¸ìì—´ì„ Bufferë¡œ ë³€í™˜í•˜ì—¬ ì´ë¯¸ì§€ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx title="og-image.tsx" {4,11}
export async function generateOgImage() {
  const svg = '...';

  const image = sharp(Buffer.from(svg)).png({
    compressionLevel: 9, // ìµœëŒ€ ì••ì¶• ë ˆë²¨ (0-9)
    adaptiveFiltering: true, // ì ì‘í˜• í•„í„°ë§ìœ¼ë¡œ íŒŒì¼ í¬ê¸° ìµœì í™”
    palette: true, // íŒ”ë ˆíŠ¸ ê¸°ë°˜ PNGë¡œ ë³€í™˜ (ìƒ‰ìƒ ìˆ˜ê°€ ì ì„ ë•Œ íš¨ê³¼ì )
    quality: 80, // ì´ë¯¸ì§€ í’ˆì§ˆ (0-100)
  });

  return await image.toBuffer();
}
```

## 3. Astroì—ì„œ OG ì´ë¯¸ì§€ ì œê³µí•˜ê¸°

ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ì—ˆìœ¼ë‹ˆ ì´ì œ ì´ë¥¼ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ Astroì—ì„œ ê²½ë¡œë¥¼ ëš«ì–´ì£¼ë©´ ë©ë‹ˆë‹¤.

ì €ëŠ” ê²½ë¡œë¥¼ `pages/og/[...slug].png.ts`ë¡œ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.
ê·¸ëŸ¼ ì´ ê¸€ì˜ OG ì´ë¯¸ì§€ëŠ” [/og/post/astro-dynamic-og.png](/og/ko/note/astro-dynamic-og.png)ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```ts {5,19,27}
import type { APIContext } from 'astro';
import { getCollection } from 'astro:content';
import { format } from 'date-fns';

import { generateOgImage } from '~/libs/og-image';

const posts = await getCollection('post');

export function getStaticPaths() {
  return posts.map((post) => ({
    params: { slug: post.slug },
  }));
}

export async function GET(ctx: APIContext) {
  const post = posts.find((post) => post.slug === ctx.params.slug);
  if (!post) return ctx.rewrite('/404');

  const ogImage = await generateOgImage({
    title: post.data.title,
    desc: format(post.data.date, 'MMM dd, yyyy'),
  });

  return new Response(ogImage, {
    status: 200,
    headers: {
      'Content-Type': 'image/png',
    },
  });
}
```

AstroëŠ” Response í—¤ë”ì—ì„œ ì´ë¯¸ì§€ í¬ë©§ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ì œ ë¸”ë¡œê·¸ í˜ì´ì§€ì—ì„œ OG ì´ë¯¸ì§€ ë§í¬ë¥¼ ì ‘ê·¼í•˜ë©´ ë©ë‹ˆë‹¤.

```ts {12}
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const posts = await getCollection('post');

  return posts.map((post) => {
    return {
      params: { slug: post.slug },
      props: {
        title: post.data.title,
        description: post.data.description,
        image: `/og/${post.slug}.png`,
        // ...
      },
    };
  });
}
```

## ğŸ¯ ê¿€íŒ

ì•…ë§ˆëŠ” ë””í…Œì¼ì— ìˆìŠµë‹ˆë‹¤.
OG ì´ë¯¸ì§€ì˜ í€„ë¦¬í‹°ë¥¼ ë†’ì´ëŠ” ì‹¤ìš©ì ì¸ íŒë“¤ì„ ê³µìœ ë“œë¦½ë‹ˆë‹¤.

### í°íŠ¸ ì‚¬ìš©í•˜ê¸°

í°íŠ¸ íŒŒì¼ ë°ì´í„°ë¥¼ ë°›ì•„ì„œ `satoriOption`ì— ì£¼ì…í•´ì£¼ë©´ CSS fontFamilyë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx {8,22,28,39}
import satori, { type SatoriOptions } from 'satori';

async function getFontData(url: string) {
  const fontResponse = await fetch(url);
  return await fontResponse.arrayBuffer();
}

const [AritaBuri, AritaBuriBold] = await Promise.all([
  getFontData(
    'https://cdn.jsdelivr.net/gh/taevel02/typeface-arita/Arita-buriM.woff',
  ),
  getFontData(
    'https://cdn.jsdelivr.net/gh/taevel02/typeface-arita/Arita-buriB.woff',
  ),
]);

const satoriOption: SatoriOptions = {
  // ...
  fonts: [
    {
      name: 'Arita Buri',
      data: AritaBuri,
      weight: 400,
      style: 'normal',
    },
    {
      name: 'Arita Buri',
      data: AritaBuriBold,
      weight: 700,
      style: 'normal',
    },
  ],
};

export async function generateOgImage() {
  const svg = await satori(
    <div
      style={{
        fontFamily: 'Arita Buri',
        // ...
      }}
    >
      {/* ... */}
    </div>,
    satoriOption,
  );
}
```

### ë°±ê·¸ë¼ìš´ë“œ íŒ¨í„´ ì ìš©í•˜ê¸°

ì´ë¯¸ì§€ê°€ ë°‹ë°‹í•˜ì§€ ì•Šë„ë¡ ë°±ê·¸ë¼ìš´ë“œ íŒ¨í„´ì„ ì¶”ê°€í•´ì£¼ë©´ ì¢‹ìŠµë‹ˆë‹¤.

```tsx {6}
await satori(
  <div
    style={{
      // ...,
      backgroundColor: '#fff',
      backgroundImage: `url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='199' viewBox='0 0 100 199'%3E%3Cg fill='%23000000' fill-opacity='0.08'%3E%3Cpath d='M0 199V0h1v1.99L100 199h-1.12L1 4.22V199H0zM100 2h-.12l-1-2H100v2z'%3E%3C/path%3E%3C/g%3E%3C/svg%3E")`,
    }}
  >
    {/* ... */}
  </div>,
);
```

https://heropatterns.com/ ì— ì¢‹ì€ ìë£Œê°€ ë§ìŠµë‹ˆë‹¤.
íŒ¨í„´ì˜ ìƒ‰ìƒê³¼ íˆ¬ëª…ë„ë¥¼ ì¡°ì ˆí•´ì„œ CSS ìŠ¤íƒ€ì¼ì— ì ìš©í•´ì£¼ë©´ ë©ë‹ˆë‹¤.

## ë§ºìœ¼ë©´ì„œ

Astroì—ì„œ Satoriì™€ Sharpë¥¼ í™œìš©í•˜ì—¬ ë™ì ìœ¼ë¡œ OG ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ëŠ” ë°©ë²•ì„ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤.

ë™ì  OG ì´ë¯¸ì§€ ìƒì„±ì€ ë‹¨ìˆœíˆ ìë™í™”ë¥¼ ë„˜ì–´ì„œ, **ì¼ê´€ëœ ë¸Œëœë“œ ì•„ì´ë´í‹°í‹°**ë¥¼ ìœ ì§€í•˜ë©´ì„œë„ ê° ì½˜í…ì¸ ì˜ **ê³ ìœ í•œ ì •ë³´ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì „ë‹¬**í•  ìˆ˜ ìˆëŠ” ê°•ë ¥í•œ ë°©ë²•ì…ë‹ˆë‹¤. íŠ¹íˆ ë¸”ë¡œê·¸ë‚˜ ë¬¸ì„œ ì‚¬ì´íŠ¸ì²˜ëŸ¼ ì½˜í…ì¸ ê°€ ì§€ì†ì ìœ¼ë¡œ ì¶”ê°€ë˜ëŠ” í”„ë¡œì íŠ¸ì—ì„œ ì ìš©í•˜ë©´ ìœ ìš©í•  ê²ƒì…ë‹ˆë‹¤.

![ì¹´ì¹´ì˜¤í†¡ì—ì„œ ë³´ì—¬ì§€ëŠ” OG ì´ë¯¸ì§€](/img/astro-dynamic-og/250816-181946.avif)
